{% extends 'base.html.twig' %}


{% block body %}

	<main class="container">
		<section class="row">
			<div class="col-12">
				<h1>PlantEcom</h1>
				<p>Bienvenue sur notre E-Shop</p>
			</div>

			{% for category in categories %}

				{% if category.parent == null %}
					<div class="col-12">
						<h2>
							{{ category.name }}
						</h2>
					</div>

				{% else %}
					<div class="col-3">
						<div class="card">
							<div class="card-body">
								<h3 class="card-title">
									{{category.name}}
								</h3>
								{# TODO : Modifier la source des img sur url et local OU Image d'illustration #}
								{% if category.products|length > 0 %}
    {% set randomProductIndex = random(0, category.products|length - 1) %}
    {% set randomProduct = category.products[randomProductIndex] %}
    {% if randomProduct.getImages|length > 0 %}
        {% set randomImage = randomProduct.getImages.first() %}
        <img src="{{ asset('assets/uploads/products/mini/300x300-' ~ randomImage.name) }}" class="card-img-top" alt="{{ category.name }}">
    {% endif %}
{% endif %}



								{# {% for produit in produits %}
							<tr>
								<td>{{ produit.id }}</td>
								<td>
									{% if produit.getImages|length > 0 %}
    {% set firstImage = produit.getImages.first() %}
    <img src="{{ asset('assets/uploads/products/mini/300x300-' ~ firstImage.name) }}" width="60%">
{% endif %} #}

								<a class="btn btn-primary" href="{{path('categories_list', {slug: category.slug }) }}" role="button">Voir les produits</a>
							</div>
						</div>
						<a href="#"></a>
					</div>
				{% endif %}

			{% endfor %}

			<div
				class="col-12">{# {{ dump() }} #}
			</div>
		</section>
	</main>

{% endblock %}
